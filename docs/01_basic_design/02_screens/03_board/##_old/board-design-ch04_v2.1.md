# 第4章: 投稿詳細画面

**掲示板機能 詳細設計書 v2.1**

[← 第3章](board-feature-design-ch03.md) | [目次に戻る](board-feature-design-ch00-index.md) | [第5章へ →](board-feature-design-ch05.md)

---

## 4.1 画面要素

投稿詳細画面は、個別の投稿を閲覧する画面です。本文、添付ファイル、コメントを表示します。

### 4.1.1 ヘッダー

### 参照ドキュメント

ヘッダー領域は全画面で共通の要素です。詳細は以下を参照してください：
- `common-header_v1.1.md` - 共通ヘッダー設計書

**ヘッダーの構成（概要）**

- **戻るボタン**: 一覧画面に戻る
- **共有ボタン**: Phase 2で実装予定
- **三点メニュー**: 通報、自分の投稿なら編集・削除

---

### 4.1.2 投稿本文エリア

投稿の詳細情報を表示します。

**表示項目**

```
┌─────────────────────────────────┐
│ ← 戻る              ⋮ メニュー  │ ← ヘッダー
├─────────────────────────────────┤
│ 📣 お知らせ                      │ ← カテゴリバッジ
│                                 │
│ 【重要】総会開催のお知らせ        │ ← タイトル（大きめフォント）
│                                 │
│ 管理組合 • 10/27 10:00          │ ← 投稿者、投稿日時
│ 🌐 翻訳する                     │ ← 翻訳ボタン
│                                 │
│ 2025年11月15日（土）に          │ ← 本文（全文表示）
│ 第10回定期総会を開催します。     │
│ 詳細は添付の資料をご覧ください。 │
│                                 │
│ 📎 添付ファイル                  │ ← 添付ファイルエリア
│ [画像1] [画像2] [PDF]           │
│                                 │
│ 👁 既読状況（回覧板のみ）         │ ← 既読状況エリア
│ 既読: 45人 / 全体: 50人（90%）   │
│ [既読にする]                     │
│                                 │
│ 💬 コメント (15)                 │ ← コメントエリア
│ ────────────────────────────     │
│ 田中さん • 10/27 11:00          │
│ 参加します!                      │
│ 🌐 翻訳する                     │
│ ────────────────────────────     │
│ 山田さん • 10/27 12:00          │
│ 資料を確認しました。             │
│ 🌐 翻訳する                     │
│ ────────────────────────────     │
│                                 │
│ [コメントを入力...]              │ ← コメント入力欄
└─────────────────────────────────┘
```

---

### 4.1.3 カテゴリバッジ

投稿が属するカテゴリを表示します。

**表示位置**

画面最上部（タイトルの上）

**表示仕様**

```
📣 お知らせ
```

- 背景色: カテゴリの色
- 文字色: 白
- 角丸: 4px
- パディング: 4px 8px

---

### 4.1.4 タイトル

投稿のタイトルを大きめのフォントで表示します。

**表示仕様**

- フォントサイズ: 20px（本文より大きい）
- 太字
- 行間: 1.4
- 改行あり（複数行表示可能）

---

### 4.1.5 投稿者情報

投稿者のニックネーム（または実名）と投稿日時を表示します。

**表示仕様**

```
管理組合 • 10/27 10:00
```

- 投稿者名: 太字
- 日時: グレー文字
- 区切り: 「•」（中黒）

**自分の投稿の場合**

```
あなた • 10/27 10:00
```

- 投稿者名: 青文字（#1976D2）
- 太字

---

### 4.1.6 本文

投稿本文を全文表示します。

**表示仕様**

- フォントサイズ: 16px
- 行間: 1.6
- 改行あり
- リンク自動検出（URL、電話番号）
- 最大2000文字

**リンク自動検出**

本文中のURLや電話番号を自動的にリンク化します。

- URL: 青文字、下線あり
- 電話番号: 青文字、タップで発信

---

### 4.1.7 翻訳ボタン

投稿本文とコメントに翻訳ボタンを表示します。

**表示位置**

- 投稿本文の直下
- 各コメントの直下

**ボタンデザイン**

```
🌐 翻訳する
```

- 文字色: 青（#1976D2）
- アイコン: 🌐（地球マーク）
- 背景色: なし（テキストリンク）

**動作**

ボタンをタップすると、選択中の言語に翻訳します。

1. タップ: 翻訳を実行（元の文章と入れ替え表示）
2. もう一度タップ: 元の言語に戻る

**翻訳後の表示**

```
This is the translated text...

🌐 原文を表示（原文: 日本語）
```

- 翻訳後の文章: 通常フォント
- 「原文を表示」リンク: 小さめフォント、グレー

---

### 4.1.8 添付ファイル表示エリア

添付ファイルがある場合に表示します。

**表示位置**

本文の直下

**セクションタイトル**

```
📎 添付ファイル
```

詳細は「4.2 添付ファイル表示」を参照してください。

---

### 4.1.9 既読状況エリア（回覧板のみ）

回覧板投稿の場合、既読状況を表示します。

**表示位置**

添付ファイルの直下

**表示内容**

```
👁 既読状況
既読: 45人 / 全体: 50人（90%）

[既読にする]
```

**既読にするボタン**

- 未読の場合: 青いボタンで表示
- 既読の場合: グレーアウトし、「既読済み」と表示

**管理者の場合**

管理者には「既読者一覧を見る」ボタンも表示します（Phase 2）。

---

### 4.1.10 コメントエリア

投稿に対するコメントを表示します。

**セクションタイトル**

```
💬 コメント (15)
```

- コメント数を表示
- コメントがない場合: 「💬 コメント (0)」

**コメントの表示**

各コメントを以下の形式で表示します。

```
────────────────────────────────
田中さん • 10/27 11:00
参加します!
🌐 翻訳する
────────────────────────────────
```

**表示項目**

- コメント投稿者: ニックネーム（太字）
- 投稿日時: グレー文字
- コメント本文: 通常フォント
- 翻訳ボタン: 本文の直下

**表示順**

投稿日時の昇順（古いコメントが上）

---

### 4.1.11 コメント入力欄

返信可能な投稿の場合、コメント入力欄を表示します。

**表示位置**

コメント一覧の最下部

**入力欄デザイン**

```
┌─────────────────────────────────┐
│ コメントを入力...                │
└─────────────────────────────────┘
[送信]
```

- プレースホルダー: 「コメントを入力...」
- 送信ボタン: 青色、右側に配置
- 文字数制限: 最大500文字

**返信不可の場合**

```
この投稿には返信できません
```

- グレーの背景
- 中央揃えのテキスト

---

## 4.2 添付ファイル表示

添付ファイルの表示方法は、ファイル種類によって異なります。

### 4.2.1 画像ファイル

**サムネイル表示**

画像はサムネイル形式で表示します。

```
┌─────┐ ┌─────┐ ┌─────┐
│     │ │     │ │     │
│ 画像1│ │ 画像2│ │ 画像3│
│     │ │     │ │     │
└─────┘ └─────┘ └─────┘
```

**表示仕様**

- サムネイルサイズ: 120px × 120px
- 横スクロールで複数枚表示
- 最大5枚まで表示

**タップ動作**

タップでライトボックス（全画面表示）を開きます。

**ライトボックスの機能**

- 画像を全画面表示
- ピンチイン・アウトで拡大縮小
- スワイプで次の画像へ移動
- 「×」ボタンで閉じる

---

### 4.2.2 PDF・Officeファイル

**ファイル名とアイコン表示**

PDFやOfficeファイルは、ファイル名とアイコンのみを表示します。

```
┌─────────────────────────┐
│ 📄 総会資料.pdf         │
│ [ダウンロード]          │
└─────────────────────────┘

┌─────────────────────────┐
│ 📊 収支報告書.xlsx      │
│ [ダウンロード]          │
└─────────────────────────┘
```

**表示項目**

- ファイルアイコン: 📄（PDF）、📊（Excel）、📝（Word）、📊（PowerPoint）
- ファイル名: 太字
- ダウンロードボタン: 青色

**タップ動作**

ダウンロードボタンをタップすると、ファイルをダウンロードします。

**Phase 2での拡張**

- ブラウザ内プレビュー機能を追加予定
- PDFビューアー統合

---

### 4.2.3 複数添付時の表示

複数のファイルが添付されている場合、以下のように表示します。

**画像のみの場合**

横スクロールでサムネイルを表示

**PDF・Officeのみの場合**

縦に並べて表示

**画像 + PDF・Officeの場合**

1. 画像サムネイル（横スクロール）
2. PDF・Officeファイル（縦並び）

**5ファイルを超える場合**

最大5ファイルまで表示し、残りは「他○件」と表示します。

---

### 4.2.4 添付ファイルなしの場合

添付ファイルがない場合、添付ファイルエリアは表示しません。

---

## まとめ

第4章では、投稿詳細画面の画面要素と添付ファイル表示仕様を定義しました。

**重要なポイント**

- 投稿本文、添付ファイル、コメントを1画面に集約
- 翻訳ボタンで多言語対応を実現
- 回覧板の既読状況を視覚的に表示
- 画像はライトボックスで拡大表示
- PDF・Officeファイルはダウンロード

---

[← 第3章](board-feature-design-ch03.md) | [目次に戻る](board-feature-design-ch00-index.md) | [第5章へ →](board-feature-design-ch05.md)

---

**Document ID:** SEC-APP-BOARD-DESIGN-002-CH04  
**Created:** 2025-10-27  
**Last Updated:** 2025-10-28
