# 第7章: 補助機能

**掲示板機能 詳細設計書 v2.0**

[← 第6章](board-feature-design-ch06.md) | [目次に戻る](board-feature-design-ch00-index.md)

---

## 7.1 既読管理機能（回覧板）

### 7.1.1 既読管理の目的

管理組合からの重要なお知らせ（総会案内、工事予定、緊急連絡など）を住民全員が確実に確認したかを把握するための機能です。

**紙の回覧板との違い**

| 項目 | 紙の回覧板 | デジタル回覧板 |
|------|-----------|--------------|
| 既読確認 | 困難（押印が必要） | 自動管理 |
| 配布速度 | 遅い（数日〜1週間） | 即時 |
| 未読者の特定 | 困難 | 一目で確認可能 |
| 再通知 | 手動で連絡 | 自動通知可能 |

---

### 7.1.2 既読ステータス

| ステータス | 説明 |
|-----------|------|
| **未読** | 投稿を開いていない、または「既読にする」ボタンを押していない |
| **既読** | 「既読にする」ボタンを押した |

**既読の判定**

投稿詳細画面を開いただけでは既読になりません。明示的に「既読にする」ボタンを押す必要があります。

**理由**

誤タップや、流し読みだけで既読にならないようにするため。

---

### 7.1.3 既読管理の動作

#### ユーザー側

**一覧画面**

1. 回覧板タブに未読バッジ表示

```
回覧板 (2)
```

2. 未読の回覧板は最上部に固定表示

```
┌────────────────────────────┐
│ 📌 📋 回覧板         重要   │
│                            │
│ 【緊急】断水工事のお知らせ   │
│ 10月30日に断水工事を実施... │
│                            │
│ 管理組合 • 10/27 09:00    │
│ 👁 未読                    │
└────────────────────────────┘
```

---

**詳細画面**

1. 投稿詳細画面で「既読にする」ボタンを表示

```
┌─────────────────────────────────┐
│ 👁 既読状況                     │
│ 既読: 45人 / 全体: 50人（90%）   │
│                                 │
│ [既読にする]                     │
└─────────────────────────────────┘
```

2. 「既読にする」ボタンをタップ

3. 既読状態に更新

```
┌─────────────────────────────────┐
│ 👁 既読状況                     │
│ 既読: 46人 / 全体: 50人（92%）   │
│                                 │
│ ✅ 既読済み                     │
└─────────────────────────────────┘
```

4. 一覧画面に戻ると、未読バッジが消える

---

#### 管理者側

**投稿詳細画面**

1. 回覧板投稿の詳細画面で既読状況を確認

```
┌─────────────────────────────────┐
│ 👁 既読状況                     │
│ 既読: 45人 / 全体: 50人（90%）   │
│                                 │
│ [既読者一覧を見る] ← Phase 2   │
└─────────────────────────────────┘
```

**既読率の表示**

- 既読人数 / 全体人数（パーセンテージ）
- プログレスバーで視覚的に表示

```
既読: 45人 / 全体: 50人（90%）

■■■■■■■■■□ 90%
```

---

**既読者一覧（Phase 2）**

Phase 2で、既読者一覧を確認できる機能を追加予定です。

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
既読者一覧（45人）

✅ 田中太郎（A棟-101号室） 10/27 10:30
✅ 山田花子（A棟-102号室） 10/27 11:00
✅ 佐藤次郎（B棟-201号室） 10/27 12:00
...

未読者一覧（5人）

❌ 鈴木一郎（A棟-105号室）
❌ 高橋美咲（B棟-210号室）
...

[未読者に通知を送る]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

**未読者への個別通知（Phase 2）**

Phase 2で、未読者に個別通知を送信できる機能を追加予定です。

**通知内容**

```
【回覧板】未読のお知らせがあります

タイトル: 【緊急】断水工事のお知らせ
投稿日時: 10/27 09:00

まだ確認されていません。
確認後、「既読にする」ボタンを押してください。

[今すぐ確認する]
```

---

### 7.1.4 既読期限機能（Phase 2）

Phase 2で、回覧板の既読期限を設定できる機能を追加予定です。

**管理者側の設定**

回覧板作成時に既読期限を設定できます。

```
既読期限: [2025/11/01] ▼

☑ 期限が近づいたら未読者に通知
```

**期限が近づいた場合の通知**

期限の3日前、1日前、当日に未読者へ自動通知を送信します。

**期限超過後の表示**

期限超過後も投稿は表示され続けますが、「期限超過」マークが表示されます。

```
┌────────────────────────────┐
│ 📌 📋 回覧板     期限超過   │
│                            │
│ 【緊急】断水工事のお知らせ   │
│ 既読期限: 2025/11/01      │
│                            │
│ 管理組合 • 10/27 09:00    │
│ 👁 未読                    │
└────────────────────────────┘
```

---

## 7.2 通報機能

### 7.2.1 通報の目的

不適切な投稿やコメントを住民が管理者に報告し、コミュニティの安全性を保つための機能です。

**AI自動モデレーションとの違い**

- **AI自動モデレーション**: 投稿前に自動チェック（プロアクティブ）
- **通報機能**: 投稿後の事後対応（リアクティブ）

両方を組み合わせることで、安全性を高めます。

---

### 7.2.2 通報対象

- 投稿本文
- コメント

---

### 7.2.3 通報理由

| 理由 | 説明 |
|------|------|
| **不適切な内容** | 暴言、誹謗中傷 |
| **スパム・宣伝** | 営利目的の宣伝、スパム |
| **個人情報の漏洩** | 個人を特定できる情報の掲載 |
| **差別的な表現** | 人種、国籍、性別などによる差別 |
| **その他** | 上記以外の理由（自由記述） |

---

### 7.2.4 通報フロー

#### ユーザー側

1. 投稿詳細画面の三点メニューから「通報する」を選択

```
⋮ メニュー
├─ 通報する
├─ 自分の投稿の場合: 編集
└─ 自分の投稿の場合: 削除
```

2. 通報理由選択画面へ遷移

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
通報理由を選択してください

○ 不適切な内容（暴言、誹謗中傷）
○ スパム・宣伝
○ 個人情報の漏洩
○ 差別的な表現
○ その他

補足説明（任意）:
┌─────────────────────────────┐
│                             │
└─────────────────────────────┘

[キャンセル] [送信]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

3. 理由を選択し、補足説明を入力（任意、最大200文字）

4. 「送信」ボタンをタップ

5. 通報完了メッセージ表示

```
✅ 通報しました

管理者が内容を確認し、適切に対応します。
ご協力ありがとうございました。

[閉じる]
```

---

#### 管理者側

1. 管理者画面で通報一覧を確認

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
通報一覧

未対応（3件）

┌────────────────────────────┐
│ 不適切な内容                │
│ 投稿: 「○○について」        │
│ 通報者: 田中さん            │
│ 通報日時: 10/27 15:00      │
│ [詳細を見る]               │
└────────────────────────────┘

対応中（1件）
完了（10件）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

2. 通報内容を確認

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
通報詳細

通報理由: 不適切な内容（暴言、誹謗中傷）
補足説明: 特定の住民を攻撃する内容が含まれています

通報者: 田中さん
通報日時: 10/27 15:00

対象投稿:
「タイトル: ○○について」
「本文: ...」

[投稿を確認する]
[対応を開始]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

3. 対応を判断

- **削除する**: 投稿・コメントを削除
- **警告する**: 投稿者に警告を送信（Phase 2）
- **対応不要**: 通報を却下

4. 対応結果を記録

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
対応結果を記録

対応: [削除する ▼]

削除理由:
┌─────────────────────────────┐
│ 特定の個人を攻撃する内容が   │
│ 含まれていたため、削除しました│
└─────────────────────────────┘

[キャンセル] [記録する]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

5. 通報者・投稿者に対応結果を通知（Phase 2）

---

### 7.2.5 通報の重複防止

**同じユーザーが同じ投稿を複数回通報できないよう制御**

既に通報済みの場合は「通報済み」と表示します。

```
⋮ メニュー
├─ 通報済み（グレーアウト）
```

---

### 7.2.6 悪用防止

通報機能の悪用（嫌がらせ目的の通報）を防ぐため、以下の対策を実施します。

**対策1: 通報履歴の記録**

- 誰が、いつ、何を通報したかを記録
- 不当な通報を繰り返すユーザーを特定

**対策2: 警告・ペナルティ**

- 悪質なユーザーには警告を送信
- 繰り返す場合は、アカウント停止などのペナルティ

---

## 7.3 翻訳機能

### 7.3.1 翻訳の目的

日本語・英語・中国語の住民が互いに理解できるよう、投稿本文とコメントを自動翻訳します。

**言語バリアの解消**

外国人住民も情報から取り残されず、コミュニティに参加できるようにします。

---

### 7.3.2 対応言語

以下の3言語間で相互翻訳が可能です。

- 日本語 ⇔ 英語
- 日本語 ⇔ 中国語（簡体字）
- 英語 ⇔ 中国語（簡体字）

---

### 7.3.3 翻訳方法

**翻訳API**

Google Translation API（Basic v2）を使用します。

**翻訳ボタン**

投稿本文・コメントごとに「翻訳」ボタンを配置します。

```
これは本文です...

🌐 翻訳する
```

---

**動作**

1. ボタンをタップすると、選択中の言語に翻訳
2. 元の文章と入れ替え表示
3. もう一度ボタンをタップすると、元の言語に戻る

---

### 7.3.4 翻訳表示の工夫

#### 翻訳後の表示

翻訳後は「翻訳済み」マークを表示します。

```
This is the translated text...

🌐 原文を表示（原文: 日本語）
```

**表示項目**

- 翻訳後の文章: 通常フォント
- 「原文を表示」リンク: 小さめフォント、グレー
- 元の言語: 「原文: 日本語」

---

#### 元の言語の表示

翻訳後、元の言語を小さく表示します。

```
（原文: 日本語）
```

これにより、ユーザーは元の言語が何であったかを確認できます。

---

#### 翻訳精度が低い可能性がある場合の注意書き

専門用語や固有名詞が多い場合、以下の注意書きを表示します。

```
⚠️ 自動翻訳のため、正確でない可能性があります
```

---

### 7.3.5 翻訳のキャッシュ

**目的**

同じ文章の翻訳は一度行ったらキャッシュし、翻訳APIの呼び出し回数を削減します。

**動作**

1. 初回翻訳時: APIを呼び出し、結果をデータベースに保存
2. 2回目以降: キャッシュから取得

**キャッシュの有効期限**

- 有効期限: 30日間
- 30日を超えた場合、再度APIを呼び出して更新

---

### 7.3.6 翻訳の制限

**翻訳できない内容**

以下の内容は翻訳できません。

- 画像内のテキスト
- 添付ファイル内のテキスト
- 絵文字（そのまま表示）

---

### 7.3.7 翻訳料金の管理

**Google Translation API の料金**

- 月50万文字まで無料
- 超過時: $20/100万文字

**使用量の監視**

管理者画面で翻訳APIの使用量を監視し、無料枠を超えないように管理します。

**Phase 2での拡張**

- 使用量アラート機能
- 月次レポート機能

---

## まとめ

第7章では、既読管理、通報、翻訳の補助機能の詳細仕様を定義しました。

**重要なポイント**

- 既読管理機能で、回覧板の確実な情報伝達を実現
- 通報機能で、不適切な投稿を事後的に対応
- 翻訳機能で、多言語住民間の言語バリアを解消
- 翻訳APIの使用量を監視し、コストを管理

---

## 全体まとめ

本文書群（第1章〜第7章）では、掲示板機能の画面固有部分の詳細設計を定義しました。

**設計の核心**

1. **「荒れないこと」を最優先** - AI自動モデレーション必須化
2. **管理者負担の最小化** - 承認フロー不採用、事後対応のみ
3. **多文化共生** - 差別的表現の完全排除、多言語対応
4. **使いやすさ** - スマホファースト、シンプルなUI/UX

**次のステップ**

本文書群で定義された仕様をベースに、以下の別文書を作成します。

- データベース設計書
- API設計書
- 画面遷移図
- AI自動モデレーション設計書
- 管理者機能設計書

---

[← 第6章](board-feature-design-ch06.md) | [目次に戻る](board-feature-design-ch00-index.md)

---

**Document ID:** SEC-APP-BOARD-DESIGN-002-CH07  
**Created:** 2025-10-27  
**Last Updated:** 2025-10-27

---

セキュレアシティ スマートコミュニケーションアプリ  
掲示板機能 詳細設計書 v2.0 - 第7章 完
