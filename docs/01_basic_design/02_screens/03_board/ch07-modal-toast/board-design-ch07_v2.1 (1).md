# 第7章: 補助機能
**掲示板機能 詳細設計書 v2.1（HarmoNet準拠）**

[← 第6章](board-design-ch06_v2.1.md) | [目次に戻る](board-design-ch00-index_v2.0.md)

---

## 🆕 ChangeLog (v2.1 / 2025-10-31)
- 旧v2.0の表現をHarmoNetトーン（やさしく・自然・控えめ）に統一  
- ファイル参照をboard-design系列に修正  
- PDFプレビュー／AIモデレーション仕様との整合を確立  
- 翻訳キャッシュ・API管理仕様を整理  
- GPTレビューコメントを追記  

---

## 7.1 既読管理機能（回覧板）

回覧板投稿の既読状況を自動で管理し、誰が確認済みかを可視化する機能。  
紙の回覧板と異なり、住民はタップ操作のみで「確認済み」を記録できる。

### 7.1.1 基本設計
| 項目 | 内容 |
|------|------|
| 対象 | 管理者投稿（回覧板カテゴリ） |
| 判定方法 | 「既読にする」ボタンの明示操作 |
| 既読更新タイミング | ボタン押下時に即時反映 |
| データ保持 | tenant_id単位で分離保存 |

### 7.1.2 UI構成

**詳細画面**
```
👁 既読状況
既読: 45人 / 全体: 50人（90%）
[既読にする]
```

- ボタンタップで「✅ 既読済み」に切替。  
- 一覧画面では未読投稿に「👁 未読」バッジを表示。  
- 未読回覧板は上位固定表示。

### 7.1.3 管理者画面（Phase 2）

管理者は以下を確認可能。  

| 機能 | 内容 |
|------|------|
| 既読率の表示 | 既読者数 / 全体人数（パーセント） |
| 既読者一覧 | 名前・日時を確認（Phase 2） |
| 未読者通知 | 未読者へ自動通知送信（Phase 2） |
| 期限設定 | 既読期限・自動通知を指定（Phase 2） |

---

## 7.2 通報機能

通報機能は、住民が不適切な投稿を管理者に報告できる仕組み。  
AIモデレーションがカバーできない“投稿後の安全維持”を担う。

### 7.2.1 通報対象
- 投稿本文  
- コメント  

### 7.2.2 通報理由
| 理由 | 説明 |
|------|------|
| 不適切な内容 | 暴言、誹謗中傷など |
| スパム・宣伝 | 営利目的の投稿 |
| 個人情報の漏洩 | 氏名や住所などの公開 |
| 差別的表現 | 国籍・性別・宗教などによる差別 |
| その他 | 自由記述 |

### 7.2.3 通報フロー

1. 投稿詳細画面のメニューから「通報する」を選択。  
2. 通報理由を選択し、補足説明を入力（任意、200文字以内）。  
3. 「送信」ボタンで管理者に通知。  
4. 完了メッセージを静かに表示：  
   > ✅ 通報しました。管理者が確認します。  

### 7.2.4 管理者対応

| 機能 | 内容 |
|------|------|
| 通報一覧 | 未対応／対応中／完了を分類表示 |
| 通報詳細 | 理由・投稿・通報者情報を確認 |
| 対応結果記録 | 「削除」「警告」「対応不要」を選択して保存 |
| 通報済み制御 | 同一ユーザーの重複通報を防止 |

### 7.2.5 悪用防止

- 通報履歴を保存し、過剰通報ユーザーを特定。  
- 悪質な場合は警告や投稿制限を適用。  

---

## 7.3 翻訳機能

投稿・コメントを多言語化し、異文化住民が共に理解できるようにする。  
Google Translation API を利用し、簡潔かつ自然な体験を重視する。

### 7.3.1 対応言語
- 日本語 ⇔ 英語  
- 日本語 ⇔ 中国語（簡体字）  
- 英語 ⇔ 中国語（簡体字）  

### 7.3.2 動作
1. 🌐 翻訳ボタンを押すと選択言語に変換。  
2. 再タップで原文に戻る。  
3. 翻訳後は「翻訳済み」マークを表示。  

**翻訳後のUI例**
```
This is the translated text.
🌐 原文を表示（原文: 日本語）
```

- 小さな文字で原文言語を表示。  
- 自動翻訳精度に関する注意文を下部に軽く表示。  

### 7.3.3 翻訳キャッシュ

| 項目 | 内容 |
|------|------|
| 保存対象 | 投稿本文・コメント翻訳結果 |
| 有効期限 | 30日間 |
| 更新条件 | 有効期限切れまたは原文更新時 |
| 目的 | API呼び出し削減・コスト最適化 |

### 7.3.4 翻訳API使用管理

- 月50万文字まで無料枠内で運用。  
- 超過時は管理画面で通知。  
- 将来的に「使用量レポート」「アラート」機能を追加予定。  

---

## 7.4 設計意図まとめ

1. 回覧板の既読確認で「伝わる安心」を提供。  
2. 通報機能でコミュニティの健全性を維持。  
3. 翻訳機能で多文化共生を支援。  
4. すべての補助機能が「やさしい操作で安全を守る」理念に基づいている。  

---

## GPTレビュー要約コメント（再構成版）

> 第7章は「安全と共生」を支える補助的な仕組みを総括している。  
> 特に通報機能と翻訳機能の設計は、AI時代のコミュニティ運営にふさわしい。  
> 全体にHarmoNetの静かなデザイン哲学が一貫しており、機能設計としての完成度が高い。  
> — *GPT上流設計レビュー担当（再編集）*  

---

**Document ID:** SEC-APP-BOARD-DESIGN-002-CH07  
**Version:** 2.1  
**Created:** 2025-10-27  
**Last Updated:** 2025-10-31  
**Author:** TKD + GPT (HarmoNet PMO)  
