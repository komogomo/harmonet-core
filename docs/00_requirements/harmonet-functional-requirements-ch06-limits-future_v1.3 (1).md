# 第6章 制約条件・将来展望（v1.3）

本章は **HarmoNet Technical Stack Definition v3.2** に準拠する。  
HarmoNetは Supabase / Prisma / NestJS / React / Tailwind / Redis / Vercel を基盤とする  
マルチテナント型の住宅コミュニティ支援アプリケーションとして設計されている。

---

## 6.1 開発スコープ制限（MVP）

初期開発フェーズ（MVP）では、以下の制約を設ける。  
これにより開発リソースを集中させ、早期リリースと安定稼働を優先する。

| 区分 | 制約内容 | 備考 |
|------|-----------|------|
| 決済機能 | アプリ内決済なし | 管理費と合算して後日請求 |
| 対応言語 | 日本語・英語・中国語（簡体字） | 繁体字はPhase 2以降 |
| 予約単位 | 1日単位のみ | 時間単位は将来拡張 |
| 対応施設 | 駐車場のみ | 集会所・ゲストルームは将来追加 |
| 同時接続数 | 約100ユーザー | Supabase Freeプラン運用 |
| 通知方式 | メール通知（SendGrid） | プッシュ通知はPhase 2で導入 |
| テナント構成 | **マルチテナント（tenant_idによる論理分離）** | 初期リリースより有効 |

---

## 6.2 将来拡張（フェーズ別計画）

HarmoNetはフェーズ方式で段階的に機能を拡張する。  
各フェーズの新機能は既存構成（Vercel + Supabase + React + NestJS）上にモジュールとして追加される。

---

### フェーズ2（MVP完了後6ヶ月以内）
**キーワード：利便性・通知強化・居住支援**

| カテゴリ | 追加機能 | 概要 |
|-----------|------------|------|
| 消耗品管理（Consumables） | 住民が住宅部品（フィルター・電池等）を確認・注文可能 | テーブル構成：`consumables_items` / `consumables_orders` |
| アンケート機能 | 管理組合が住民向けに質問・集計 | 単一選択・複数選択・自由記述対応 |
| 掃除当番管理 | 当番表の自動生成と通知 | RLSによる班単位管理 |
| プッシュ通知（FCM） | 各種イベントの即時通知 | Firebase Cloud Messaging採用 |
| 翻訳キャッシュ最適化 | Redis + Supabaseに差分保存 | 再翻訳防止・翻訳コスト削減 |

---

### フェーズ3（MVP完了後1年以内）
**キーワード：AI最適化・マルチテナント管理強化・スマート化**

| カテゴリ | 追加機能 | 概要 |
|-----------|-----------|------|
| AI要約 | お知らせ・掲示板投稿の要約生成 | GPTベースの自然言語要約 |
| HEMS連携 | エネルギー使用量の可視化 | 外部API連携（電力会社・HEMSデバイス） |
| マルチテナント管理UI | 複数物件を管理するUI・統計画面 | Supabase RLS + 管理画面強化 |
| AIチャットボット | よくある質問の自動応答 | OpenAI API連携予定 |
| 翻訳品質向上 | DeepL／GPT翻訳併用 | 高精度翻訳選択機構 |
| Cross-Tenant Console | 管理者が複数テナントを一括管理 | System Admin向け機能 |

---

### フェーズ4（MVP完了後2年以内）
**キーワード：IoT・自動化・持続可能性**

| カテゴリ | 追加機能 | 概要 |
|-----------|-----------|------|
| IoTデバイス連携 | スマートロック・温湿度センサー統合 | Supabase Edge経由制御 |
| 異常検知 | 長期間ログインなし／異常アクセス検知 | AIによるパターン分析 |
| コミュニティ活性 | イベント募集・物品シェア・スキル共有 | モジュール化UI拡張 |
| データ分析 | 利用統計・予測分析 | Supabase + Metabase連携 |
| サステナビリティ指標 | 電力・参加率可視化 | 環境負荷分析レポート化 |

---

## 6.3 技術的課題と検討事項

| 項目 | 内容 | 対応方針 |
|------|------|-----------|
| 翻訳コスト管理 | Google Translation APIの無料枠50万文字／月 | Redisキャッシュ＋使用量モニタリング |
| Supabase制限 | 無料プランで接続数上限あり | Proプラン移行時にRLS最適化 |
| 通知分散 | SendGridとFCMの二重管理 | 統一通知マネージャー導入予定 |
| データ保護 | EU圏データ利用時のGDPR対応 | Supabaseリージョン選択で対応 |
| AI生成リソース | 翻訳・要約などAI処理の最適化 | キャッシュ＋非同期処理化でコスト削減 |

---

## 6.4 開発ロードマップ概要

| フェーズ | 期間 | 主な成果物 |
|-----------|------|-------------|
| Phase 1 | 〜2026年5月 | MVP（お知らせ・掲示板・予約・マイページ・**マルチテナント基盤**） |
| Phase 2 | 2026年11月 | 消耗品管理・アンケート・プッシュ通知 |
| Phase 3 | 2027年5月 | AI要約・HEMS連携・マルチテナント管理UI・Cross-Tenant Console |
| Phase 4 | 2028年以降 | IoT連携・予測分析・サステナビリティ指標 |

---

*by GPT (HarmoNet PMO AI)*  
**（End of Chapter 6）**
