# 第3章: 掲示板一覧画面

**掲示板機能 詳細設計書 v2.2**

[← 第2章](board-feature-design-ch02.md) | [目次に戻る](board-feature-design-ch00-index.md) | [第4章へ →](board-feature-design-ch04.md)

---

## 🆕 ChangeLog (v2.2 / 2025-10-31)

- PDFプレビュー仕様追加（モーダル上部に「閉じる」ボタンを配置、背景タップで閉じない仕様）
- 「ルール」タグ対応（ごみ出し・マナー・防災などの常設掲示運用をUIに反映）
- タグ管理構造の整理（「重要」「ルール」等タグフィルタ表示に対応）
- 原本管理方針（PDF原本のシステム保有管理）をUI上で明示的に反映
- ドキュメントバージョンをv2.2に更新

---

## 3.1 画面要素

掲示板一覧画面は、住民が最も頻繁に利用する画面です。投稿の一覧を表示し、タップで詳細画面へ遷移します。

### 3.1.1 ヘッダー

### 参照ドキュメント

ヘッダー領域は全画面で共通の要素です。詳細は以下を参照してください：
- `common-header_v1.1.md` - 共通ヘッダー設計書

**ヘッダーの構成（概要）**

- **画面タイトル**: 「掲示板」
- **検索アイコン**: Phase 2で実装予定
- **新規投稿ボタン**: FAB（Floating Action Button）形式で右下に配置

---

### 3.1.2 安心感を提供するバナー

画面上部に、安心感を提供するバナーを表示します。

**表示内容**

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🛡️ この掲示板は安全に運用されています
・不適切な投稿は自動的にブロック
・通報機能による迅速な対応
・管理者が常時監視
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**表示位置**
タブ切り替えの直下

**表示タイミング**
- 初回訪問時に表示
- 以降は非表示（設定で再表示可能）

**デザイン**
- 背景色: 薄い青（#E3F2FD）
- 文字色: 濃い青（#1565C0）
- アイコン: 🛡️（盾マーク）
- 角丸: 8px

---

### 3.1.3 タブ切り替え

掲示板の種類ごとにタブで切り替えます。

**タブ一覧**

| タブ名 | 表示内容 |
|-------|---------|
| **すべて** | 全体掲示板 + グループ掲示板 + 回覧板 |
| **全体掲示板** | 全体掲示板のみ |
| **グループ掲示板** | 所属グループの掲示板のみ |
| **回覧板** | 回覧板のみ |

**未読バッジ表示**

各タブに未読件数のバッジを表示します。

```
すべて (5)  全体 (2)  グループ (1)  回覧板 (2)
```

**スワイプ操作**
左右スワイプでタブを切り替え可能にします。

---

### 3.1.4 投稿カード

各投稿を1枚のカードで表示します。

**カードの構成**

```
┌────────────────────────────┐
│ 📣 お知らせ          NEW   │ ← カテゴリバッジ、NEWバッジ
│                            │
│ 【重要】総会開催のお知らせ   │ ← タイトル（太字、最大2行）
│ 2025年11月15日に総会を...  │ ← 本文プレビュー（1行、グレー）
│                            │
│ 管理組合 • 10/27 10:00    │ ← 投稿者、投稿日時
│ 📎 💬 15 👁 未読          │ ← 添付、コメント数、既読/未読
└────────────────────────────┘
```

**表示項目**

| 項目 | 説明 | 表示条件 |
|------|------|---------|
| カテゴリバッジ | カテゴリ名をバッジ表示 | 常に表示 |
| NEWバッジ | 「NEW」マーク | 24時間以内の投稿 |
| タイトル | 投稿タイトル（太字） | 常に表示（最大2行） |
| 本文プレビュー | 本文の冒頭（グレー） | 常に表示（1行） |
| 投稿者ニックネーム | 投稿者の表示名 | 常に表示 |
| 投稿日時 | 投稿日時（相対時間） | 常に表示 |
| 添付ファイルアイコン | 📎（画像）、📄（PDF）、📊（Office） | 添付ファイルがある場合 |
| コメント数アイコン | 💬 15 | コメントがある場合 |
| 既読/未読アイコン | 👁 未読 / 既読 | 回覧板のみ |
| 自分の投稿マーク | 「あなたの投稿」 | 自分の投稿の場合 |

---

### 3.1.5 タグとルールの表示（v2.2追加）

- 投稿カード上部にタグチップを表示する（例：「重要」「ルール」「防災」）。  
- 「ルール」タグ付き投稿は常に上位に固定表示。  
- 「ルール」タグ投稿はごみ出し・ペット・防災マナー等の運用文書であり、PDFまたは画像を添付。  
- 添付アイコンタップ時にモーダルでプレビュー表示される。  

---

## 3.2 レイアウト仕様

### 3.2.1 スクロール方式
**縦スクロール**
投稿カードを縦にスクロールして表示します。

**無限スクロール対応**
一度に20件を読み込み、スクロールして最下部に到達したら次の20件を自動読み込みします。

**ローディング表示**
読み込み中は「読み込み中...」のスピナーを表示します。

---

### 3.2.2 タップ動作
**投稿カードをタップ**
投稿詳細画面へ遷移します。

**カテゴリ・タグチップをタップ**
該当するタグで一覧をフィルタリングします（「重要」「ルール」など）。

---

## 3.3 UI/UXポイント

### 3.3.1 回覧板の固定表示
未読の回覧板は最上部に固定表示します。

### 3.3.2 NEWバッジ表示
24時間以内の投稿に「NEW」バッジを表示します。

### 3.3.3 自分の投稿マーク
自分の投稿には「あなたの投稿」マークを表示します。

### 3.3.4 空状態の表示
投稿が1件もない場合にメッセージを表示します。

### 3.3.5 エラー表示
通信・サーバーエラー時のメッセージ表示。

---

## 3.4 添付ファイルプレビュー仕様（v2.2追加）

- 添付PDFはタップでモーダルプレビューを開く。  
- プレビューは **PDF.js** を使用し、アプリ内で直接表示。  
- モーダル上部に小さく「閉じる」テキストまたは✕アイコンを表示し、それをタップして閉じる。  
- 背景タップでは閉じず、PDFのスクロール操作を優先する。  
- UIトーンは「やさしく・自然・控えめ」を基本とし、他画面と統一。  

---

**Document ID:** SEC-APP-BOARD-DESIGN-002-CH03  
**Created:** 2025-10-27  
**Last Updated:** 2025-10-31  
**Version:** 2.2  
